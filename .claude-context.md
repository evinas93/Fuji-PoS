# .claude-context.md - Fuji POS Project Context Template

**üö® ALWAYS READ THIS FILE FIRST BEFORE MAKING ANY CODE CHANGES üö®**

This file ensures Claude has proper context for the Fuji Restaurant POS project.

---

## üìã Required Reading Before Any Development

### **1. Project Documentation Files**

- **Primary:** `CLAUDE.md` - Complete tech stack, architecture, and development guidelines
- **Secondary:** `fuji-pos-prd.md` (in Downloads) - Original business requirements document
- **Tasks:** `.taskmaster/tasks/tasks.json` - Current development tasks and dependencies

### **2. Quick Context Check**

```markdown
‚òê Read CLAUDE.md for current tech stack (TypeScript + Supabase)
‚òê Check PRD for business requirements and success criteria
‚òê Verify task dependencies in TaskMaster
‚òê Confirm changes align with project architecture
```

---

## üéØ Standard Context Loading Statement

**Use this template at the start of development requests:**

```
CONTEXT: Fuji Restaurant POS System
- Tech Stack: TypeScript + Next.js + Supabase (see CLAUDE.md)
- Requirements: See fuji-pos-prd.md for business specs
- Current Phase: [Check TaskMaster for current task #]
- Architecture: See CLAUDE.md Section "System Architecture"

REQUEST: [Your specific development request]

VALIDATION: Ensure solution meets:
- PRD Section [X] requirements
- CLAUDE.md tech stack specifications
- TaskMaster task [ID] acceptance criteria
```

---

## üèóÔ∏è Project Architecture Quick Reference

### **Tech Stack (from CLAUDE.md)**

- **Frontend:** Next.js with TypeScript (touch-optimized)
- **Backend:** Node.js + Express + TypeScript
- **Database:** Supabase (PostgreSQL + Auth + Real-time)
- **Payment:** Stripe integration
- **Deployment:** Vercel (frontend) + Supabase (backend/DB)

### **Key File Locations**

```
C:\Users\User\OneDrive\Documents\repo\PoS\
‚îú‚îÄ‚îÄ CLAUDE.md                    # Main project reference
‚îú‚îÄ‚îÄ .taskmaster/tasks/tasks.json # Current tasks
‚îú‚îÄ‚îÄ fuji-pos-task-list.md       # Human-readable task list
‚îî‚îÄ‚îÄ .claude-context.md          # This file

External:
C:\Users\User\Downloads\fuji-pos-prd.md  # Original PRD
```

---

## üìä Critical Business Rules (from PRD)

### **Payment Calculations**

```typescript
// From CLAUDE.md - Payment Processing Requirements
Subtotal = Sum of (item_price √ó quantity) + modifiers
Tax = Subtotal √ó tax_rate
Gratuity = (Subtotal + Tax) √ó 0.20 (if party ‚â• 2)
Service_Charge = Total √ó 0.035 (if credit card)
Final_Total = Subtotal + Tax + Gratuity + Service_Charge - Discounts
```

### **User Roles & Permissions**

- **Manager:** Full system access, reporting, user management
- **Server:** Order taking, payment processing
- **Cashier:** Payment processing, receipt generation
- **Kitchen:** Order viewing, status updates

### **Performance Targets (from PRD)**

- Order processing: <30 seconds
- Payment processing: <45 seconds
- Daily reconciliation: <5 minutes
- System uptime: >99.9%

---

## üîç Section Reference Guide

### **For Menu Management Features:**

- **PRD:** Section 7.1 "Menu Management Module"
- **CLAUDE.md:** "Menu & Pricing Structure" + Database Schema
- **TaskMaster:** Task #3 "Menu Management System"

### **For Order Processing:**

- **PRD:** Section 7.2 "Order Processing System"
- **CLAUDE.md:** "User Interface Specifications"
- **TaskMaster:** Task #4 "Order Processing System"

### **For Payment Processing:**

- **PRD:** Section 7.3 "Payment Processing"
- **CLAUDE.md:** "Payment Processing Requirements"
- **TaskMaster:** Task #5 "Payment Processing Module"

### **For Analytics/Reporting:**

- **PRD:** Section 10 "Analytics and Reporting"
- **CLAUDE.md:** "Analytics & Reporting Requirements"
- **TaskMaster:** Task #6 "Analytics and Reporting Dashboard"

---

## ‚ö° Supabase-Specific Context

### **Database Tables (from CLAUDE.md)**

```typescript
// Core tables with UUID primary keys
- profiles: User profiles (extends Supabase auth)
- menu_items: Menu with JSONB modifiers
- categories: Menu categories
- orders: Order records with status tracking
- order_items: Line items with JSONB modifiers
- daily_sales: Aggregated sales data
```

### **Row Level Security (RLS)**

- All tables use RLS policies for role-based access
- Managers: Full access to menu/user management
- Staff: Read menu, create/update orders
- Kitchen: Read orders, update order status

### **Real-time Features**

- Order status updates via Supabase subscriptions
- Kitchen display live order updates
- Dashboard real-time sales tracking

---

## üö® Development Guardrails

### **NEVER Do These Without Context:**

- ‚ùå Change database schema without checking CLAUDE.md
- ‚ùå Modify payment calculations without PRD validation
- ‚ùå Add features not in TaskMaster or PRD scope
- ‚ùå Use different tech stack than TypeScript + Supabase

### **ALWAYS Do These:**

- ‚úÖ Reference CLAUDE.md for tech specifications
- ‚úÖ Validate business rules against PRD
- ‚úÖ Check TaskMaster for current task status
- ‚úÖ Ensure TypeScript type safety
- ‚úÖ Follow Supabase RLS patterns
- ‚úÖ Test against success criteria

---

## üìù Quick Prompt Templates

### **Feature Implementation:**

```
CONTEXT: Fuji POS (see CLAUDE.md + PRD)
FEATURE: [Feature name from TaskMaster #X]
REQUIREMENTS: PRD Section [Y] specifies [requirements]
TECH SPEC: CLAUDE.md [section] defines [technical approach]
ACCEPTANCE: Must meet [specific criteria from task]
```

### **Bug Fix:**

```
CONTEXT: Fuji POS bug in [component]
CURRENT: [Description of issue]
EXPECTED: Based on PRD Section [X], should [behavior]
TECH STACK: TypeScript + Supabase per CLAUDE.md
FIX SCOPE: [Minimal change to resolve issue]
```

### **Code Review:**

```
CONTEXT: Review Fuji POS code for [component]
CHECK: Alignment with CLAUDE.md tech specifications
VALIDATE: Meets PRD business requirements
VERIFY: Follows TypeScript + Supabase patterns
SECURITY: Supabase RLS policies applied correctly
```

---

## üéØ Current Development Status

**Check these before starting work:**

1. **Active Task:** `task-master next` to see current task
2. **Dependencies:** `task-master show [id]` for task details
3. **Progress:** `task-master list` for overall status
4. **Context:** Always reference this file + CLAUDE.md + PRD

---

## üí° Tips for Claude Sessions

### **Session Startup:**

1. Reference this file first
2. Check TaskMaster for current task
3. Read relevant CLAUDE.md section
4. Validate against PRD requirements

### **During Development:**

- Keep CLAUDE.md open for tech reference
- Check PRD for business rule validation
- Update TaskMaster status as you progress
- Reference specific sections in prompts

### **Before Completion:**

- Validate against task acceptance criteria
- Ensure TypeScript + Supabase compliance
- Check PRD success metrics
- Update task status to completed

---

**Last Updated:** September 22, 2025
**Project Status:** Development Phase
**Current Sprint:** Foundation Setup (TaskMaster Task #1)\*\*
